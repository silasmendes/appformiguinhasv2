{% extends 'base.html' %}
{% block title %}Atendimento à Família - Etapa 4{% endblock %}
{% block content %}
{% include 'components/progress_bar_etapas.html' %}
<form id="formEtapa4" autocomplete="off" method="post">
    <input type="hidden" id="familia_id_hidden" name="familia_id" value="{{ session.get('familia_id', '') }}">
    <div class="row align-items-end mb-3">
        <div class="col-md-6">
            <label for="telefone_principal" class="form-label">Celular principal para contato</label>
            <input type="text" class="form-control" id="telefone_principal" name="telefone_principal" autocomplete="off" value="{{ session['cadastro'].get('telefone_principal', '') }}">
        </div>
        <div class="col-auto mt-md-4 whatsapp-check">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="telefone_principal_whatsapp" name="telefone_principal_whatsapp" autocomplete="off" {% if session['cadastro'].get('telefone_principal_whatsapp') %}checked{% endif %}>
                <label class="form-check-label" for="telefone_principal_whatsapp">Tem WhatsApp</label>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="telefone_principal_nome_contato" class="form-label">De quem é este telefone?</label>
        <div class="contato-tags mb-2">
            <span class="contato-tag" data-contato="Próprio" title="O telefone é da própria pessoa responsável pela família">Próprio</span>
            <span class="contato-tag" data-contato="Cônjuge" title="Telefone do marido, esposa ou companheiro(a)">Cônjuge</span>
            <span class="contato-tag" data-contato="Filho(a)" title="Telefone de filho(a) da responsável">Filho(a)</span>
            <span class="contato-tag" data-contato="Parente" title="Outro parente (mãe, pai, irmão, irmã, etc.)">Parente</span>
            <span class="contato-tag" data-contato="Vizinho" title="Telefone de um vizinho de confiança">Vizinho</span>
            <span class="contato-tag" data-contato="Empregador" title="Telefone de patrão(a) ou local de trabalho">Empregador</span>
            <span class="contato-tag" data-contato="Voluntário/ONG" title="Número de alguém da rede de apoio">Voluntário/ONG</span>
            <span class="contato-tag" data-contato="Emprestado" title="Telefone usado temporariamente no momento do cadastro">Emprestado</span>
            <span class="contato-tag" data-contato="Orelhão" title="Telefone público informado como referência">Orelhão</span>
        </div>
        <input type="text" class="form-control" id="telefone_principal_nome_contato" name="telefone_principal_nome_contato" autocomplete="off" value="{{ session['cadastro'].get('telefone_principal_nome_contato', '') }}">
    </div>
    <div class="row align-items-end mb-3">
        <div class="col-md-6">
            <label for="telefone_alternativo" class="form-label">Outro telefone para contato</label>
            <input type="text" class="form-control" id="telefone_alternativo" name="telefone_alternativo" autocomplete="off" value="{{ session['cadastro'].get('telefone_alternativo', '') }}">
        </div>
        <div class="col-auto mt-md-4 whatsapp-check">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="telefone_alternativo_whatsapp" name="telefone_alternativo_whatsapp" autocomplete="off" {% if session['cadastro'].get('telefone_alternativo_whatsapp') %}checked{% endif %}>
                <label class="form-check-label" for="telefone_alternativo_whatsapp">Tem WhatsApp</label>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="telefone_alternativo_nome_contato" class="form-label">De quem é este telefone alternativo?</label>
        <div class="contato-tags mb-2">
            <span class="contato-tag" data-contato="Próprio" title="O telefone é da própria pessoa responsável pela família">Próprio</span>
            <span class="contato-tag" data-contato="Cônjuge" title="Telefone do marido, esposa ou companheiro(a)">Cônjuge</span>
            <span class="contato-tag" data-contato="Filho(a)" title="Telefone de filho(a) da responsável">Filho(a)</span>
            <span class="contato-tag" data-contato="Parente" title="Outro parente (mãe, pai, irmão, irmã, etc.)">Parente</span>
            <span class="contato-tag" data-contato="Vizinho" title="Telefone de um vizinho de confiança">Vizinho</span>
            <span class="contato-tag" data-contato="Empregador" title="Telefone de patrão(a) ou local de trabalho">Empregador</span>
            <span class="contato-tag" data-contato="Voluntário/ONG" title="Número de alguém da rede de apoio">Voluntário/ONG</span>
            <span class="contato-tag" data-contato="Emprestado" title="Telefone usado temporariamente no momento do cadastro">Emprestado</span>
            <span class="contato-tag" data-contato="Orelhão" title="Telefone público informado como referência">Orelhão</span>
        </div>
        <input type="text" class="form-control" id="telefone_alternativo_nome_contato" name="telefone_alternativo_nome_contato" autocomplete="off" value="{{ session['cadastro'].get('telefone_alternativo_nome_contato', '') }}">
    </div>
    <div class="mb-3">
        <label for="email_responsavel" class="form-label">E-mail da pessoa responsável (se tiver)</label>
        <input type="email" class="form-control" id="email_responsavel" name="email_responsavel" autocomplete="off" value="{{ session['cadastro'].get('email_responsavel', '') }}">
        <div id="email-feedback" class="invalid-feedback">Email inválido</div>
    </div>
    <div class="d-flex justify-content-between">
        <a href="{{ url_for('fluxo_atendimento.atendimento_etapa3') }}" class="btn btn-secondary" id="btnVoltar">Voltar</a>
        <button type="submit" class="btn btn-primary" id="btnProxima" data-next-url="{{ url_for('fluxo_atendimento.atendimento_etapa4') }}">Próxima etapa</button>
    </div>
</form>
{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/etapa4_contato.css') }}">
{% endblock %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/inputmask@5.0.8/dist/inputmask.min.js"></script>
<script src="{{ url_for('static', filename='js/etapa4_contato.js') }}"></script>
{% endblock %}